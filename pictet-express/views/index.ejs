<%- include('partials/header') %>
<%- include('partials/secondary-nav') %>

<div class="stability-message">
    <h1>UBS ASSET MANAGEMENT Asset Management</h1>
    <h2>Wealth Advisory Portal</h2>
</div>

<div class="main-container">
    <div class="client-section">
        <div class="client-info">
            <div class="client-selection-row">
                <div class="client-selection">
                    <select class="client-dropdown" id="client-dropdown">
                        <option value="" disabled>Select a client</option>
                        <% clients.forEach(client => { %>
                            <option value="<%= client.name %>"><%= client.name %></option>
                        <% }) %>
                    </select>
                </div>
                <div class="portfolio-button">
                    <a href="/client-alerts" class="button">Go To Client Alerts</a>
                </div>
            </div>
        </div>
        <div class="client-actions">
            <div class="date-info">
                <span class="date-label">Current Date:</span>
                <span class="date-value" id="current-date"></span>
            </div>
            <div class="date-info">
                <span class="date-label">Last Meeting:</span>
                <span class="date-value">June 15, 2025</span>
            </div>
        </div>
    </div>
</div>

<script>
function updateCurrentDate() {
    const now = new Date();
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric'
    };
    document.getElementById('current-date').textContent = now.toLocaleString('en-US', options);
}

// Update immediately and then every second
updateCurrentDate();
setInterval(updateCurrentDate, 1000);

// Load and set the selected client on page load
document.addEventListener('DOMContentLoaded', function() {
    const savedClient = localStorage.getItem('selectedClient');
    const dropdown = document.getElementById('client-dropdown');
    
    if (savedClient && dropdown) {
        dropdown.value = savedClient;
    }
});

// Client selection handling
document.getElementById('client-dropdown').addEventListener('change', function(e) {
    const selectedClient = e.target.value;
    // Extract just the name part before the hyphen and trim any whitespace
    const clientName = selectedClient.split(' - ')[0].trim();
    localStorage.setItem('selectedClient', selectedClient);
    localStorage.setItem('clientName', clientName);
    // Don't reload the page - just keep the selection
    console.log('Selected client:', selectedClient);
});
</script>

<%- include('partials/footer') %> 