<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOMBARD ODIER Express</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/briefing" class="logo">
                <img src="/images/ubs-logo.jpg" alt="UBS ASSET MANAGEMENT Logo" class="logo-image">
            </a>
            <nav class="main-nav">
                <% if (typeof user !== 'undefined' && user && user.type === 'banker') { %>
                    <a href="/client-alerts?tab=alerts" class="nav-link <%= (typeof path !== 'undefined' && path.includes('/client-alerts')) ? 'active' : '' %>">Client Alerts</a>
                <% } %>
                <a href="/briefing" class="nav-link <%= (typeof path !== 'undefined' && path.includes('/briefing')) ? 'active' : '' %>">PE Briefing</a>
                <a href="/portfolio-summary?tab=summary" class="nav-link <%= (typeof path !== 'undefined' && (path.includes('/portfolio-summary') || path.includes('/investment-details'))) ? 'active' : '' %>">PE Portfolio</a>
                <a href="/investment-opportunities?tab=secondary" class="nav-link" id="investment-opportunities-nav">Investment Opportunities</a>
                <a href="/my-transactions?tab=listings" class="nav-link" id="my-transactions-nav">My Transactions</a>
                <a href="/messages" class="nav-link <%= (typeof path !== 'undefined' && path.includes('/messages')) ? 'active' : '' %>">Messages</a>
            </nav>
            <nav class="nav-menu">
                <a href="/support" class="nav-link <%= (typeof path !== 'undefined' && path.includes('/support')) ? 'active' : '' %>">Support</a>
                <a href="/logout" class="login-link">LOG OUT</a>
                <% if (typeof user !== 'undefined' && user) { %>
                <div class="user-profile">
                    <div class="user-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="8" r="4" stroke="currentColor" stroke-width="2"/>
                            <path d="M4 20C4 16.6863 6.68629 14 10 14H14C17.3137 14 20 16.6863 20 20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="user-info">
                        <div class="user-name"><%= user.name.split(' - ')[0] %></div>
                    </div>
                </div>
                <% } %>
            </nav>
        </div>
    </header>
    
    <!-- Sub-Navigation Bar -->
    <div class="sub-nav-container" id="subNavContainer">
        <!-- Portfolio Sub-Nav -->
        <nav class="sub-nav" id="portfolio-subnav" style="display: none;">
            <a href="/portfolio-summary?tab=summary" class="sub-nav-link" id="portfolio-summary-link">Portfolio Summary</a>
            <a href="/portfolio-summary?tab=temporary" class="sub-nav-link" id="client-mandates-link">My Mandates</a>
        </nav>
        
        <!-- Investment Opportunities Sub-Nav -->
        <nav class="sub-nav" id="investment-opportunities-subnav" style="display: none;">
            <a href="/investment-opportunities?tab=secondary" class="sub-nav-link" id="secondary-link">Secondary Market Opportunities</a>
            <a href="/investment-opportunities?tab=pe-investments" class="sub-nav-link" id="pe-investments-link">Available UBS PE Investments</a>
        </nav>
        
        <!-- My Transactions Sub-Nav -->
        <nav class="sub-nav" id="my-transactions-subnav" style="display: none;">
            <a href="/my-transactions?tab=listings" class="sub-nav-link" id="my-listings-link">My Listings</a>
            <a href="/my-transactions?tab=transactions" class="sub-nav-link" id="my-transactions-link">Transactions</a>
        </nav>
        
        <!-- Client Alerts Sub-Nav -->
        <nav class="sub-nav" id="client-alerts-subnav" style="display: none;">
            <a href="/client-alerts?tab=alerts" class="sub-nav-link" id="alerts-link">Client Alerts</a>
            <a href="/client-alerts?tab=communications" class="sub-nav-link" id="communications-link">Client Communications</a>
        </nav>
    </div>
    
    <script>
    // Show appropriate sub-navigation based on current page
    document.addEventListener('DOMContentLoaded', function() {
        const path = window.location.pathname;
        const params = new URLSearchParams(window.location.search);
        const tab = params.get('tab');
        const subNavContainer = document.getElementById('subNavContainer');
        
        // Hide all sub-navs first
        document.querySelectorAll('.sub-nav').forEach(nav => nav.style.display = 'none');
        
        // Show appropriate sub-nav based on path
        if (path.includes('/portfolio-summary') || path.includes('/client-mandates') || path.includes('/investment-details')) {
            document.getElementById('portfolio-subnav').style.display = 'flex';
            subNavContainer.style.display = 'block';
            
            // Set active state for portfolio sub-nav links
            document.querySelectorAll('#portfolio-subnav .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (tab === 'temporary') {
                document.getElementById('client-mandates-link').classList.add('active');
            } else {
                document.getElementById('portfolio-summary-link').classList.add('active');
            }
        }
        else if (path.includes('/fund-details') && params.get('source') === 'posted') {
            // Fund details for posted investments - show My Transactions nav
            document.getElementById('my-transactions-subnav').style.display = 'flex';
            subNavContainer.style.display = 'block';
            
            // Set active state for my transactions sub-nav links
            document.querySelectorAll('#my-transactions-subnav .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById('my-listings-link').classList.add('active');
        }
        else if (path.includes('/investment-opportunities') || path.includes('/fund-details') || path.includes('/create-bid')) {
            document.getElementById('investment-opportunities-subnav').style.display = 'flex';
            subNavContainer.style.display = 'block';
            
            // Set active state for investment opportunities sub-nav links
            document.querySelectorAll('#investment-opportunities-subnav .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (tab === 'pe-investments') {
                document.querySelectorAll('#investment-opportunities-subnav #pe-investments-link')[0].classList.add('active');
            } else {
                document.getElementById('secondary-link').classList.add('active');
            }
        }
        else if (path.includes('/my-transactions') || path.includes('/transactions')) {
            document.getElementById('my-transactions-subnav').style.display = 'flex';
            subNavContainer.style.display = 'block';
            
            // Set active state for my transactions sub-nav links
            document.querySelectorAll('#my-transactions-subnav .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (tab === 'transactions') {
                document.getElementById('my-transactions-link').classList.add('active');
            } else {
                document.getElementById('my-listings-link').classList.add('active');
            }
        }
        else if (path.includes('/client-alerts')) {
            document.getElementById('client-alerts-subnav').style.display = 'flex';
            subNavContainer.style.display = 'block';
            
            // Set active state for client alerts sub-nav links
            document.querySelectorAll('#client-alerts-subnav .sub-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (tab === 'communications') {
                document.getElementById('communications-link').classList.add('active');
            } else {
                document.getElementById('alerts-link').classList.add('active');
            }
        }
        else {
            subNavContainer.style.display = 'none';
        }
        
        // Set main nav active states dynamically based on context
        const investmentOpportunitiesNav = document.getElementById('investment-opportunities-nav');
        const myTransactionsNav = document.getElementById('my-transactions-nav');
        
        // Check if we're viewing a posted investment in fund-details
        if (path.includes('/fund-details') && params.get('source') === 'posted') {
            myTransactionsNav.classList.add('active');
        } else if (path.includes('/investment-opportunities') || path.includes('/fund-details') || path.includes('/create-bid')) {
            investmentOpportunitiesNav.classList.add('active');
        } else if (path.includes('/my-transactions') || path.includes('/transactions')) {
            myTransactionsNav.classList.add('active');
        }
    });
    </script>
    
    <main>
</body>
</html> 